# GigaChat CLI - Генератор выжимок текста

CLI-инструмент для генерации кратких выжимок (summary) текстовых сообщений через GigaChat API.

## Возможности

- ✅ Генерация кратких выжимок текста через GigaChat API
- ✅ Поддержка ввода текста из файла или напрямую через аргументы
- ✅ Простой и понятный CLI-интерфейс
- ✅ Обработка ошибок API и удобные сообщения об ошибках
- ✅ Логирование ключевых операций

## Установка

1. Убедитесь, что у вас установлен Python 3.10+

2. Активируйте виртуальное окружение:
   ```bash
   # Windows PowerShell
   .\venv\Scripts\Activate.ps1
   
   # Windows CMD
   .\venv\Scripts\activate.bat
   
   # Linux/Mac
   source venv/bin/activate
   ```

3. Установите зависимости:
   ```bash
   pip install -r requirements.txt
   ```

## Настройка

1. Получите API credentials на https://developers.sber.ru/gigachat:
   - Зарегистрируйтесь на платформе
   - Создайте приложение
   - Получите `CLIENT_ID` и `CLIENT_SECRET`

2. Создайте файл `.env` на основе примера:
   ```bash
   # Windows PowerShell
   Copy-Item env.example .env
   
   # Windows CMD
   copy env.example .env
   
   # Linux/Mac
   cp env.example .env
   ```
   
   Или создайте файл `.env` вручную и скопируйте содержимое из `env.example`

3. Откройте `.env` и замените значения:
   ```env
   CLIENT_ID=ваш_client_id
   CLIENT_SECRET=ваш_client_secret
   ```

## Использование

### Способ 1: Через модуль Python (рекомендуется)

#### Генерация выжимки из файла

```bash
python -m bot.main summary --file messages.txt
```

#### Генерация выжимки из текста

```bash
python -m bot.main summary --text "Ваш текст для обработки"
```

### Способ 2: Через скрипт-обертку

#### Генерация выжимки из файла

```bash
python gigachat_cli.py summary --file messages.txt
```

#### Генерация выжимки из текста

```bash
python gigachat_cli.py summary --text "Ваш текст для обработки"
```

### Приоритет аргументов

Если указаны оба аргумента (`--file` и `--text`), приоритет имеет `--text`.

### Справка

```bash
# Через модуль
python -m bot.main --help
python -m bot.main summary --help

# Через скрипт-обертку
python gigachat_cli.py --help
python gigachat_cli.py summary --help
```

## Структура проекта

```
.
├── bot/
│   ├── __init__.py
│   ├── main.py          # CLI-приложение
│   ├── main_telebot.py  # Telegram-бот через GigaChat
│   ├── gigachat.py      # Модуль для работы с GigaChat API
│   └── utils.py         # Вспомогательные функции
├── gigachat_cli.py      # Скрипт-обертка для удобного запуска
├── .env                 # Файл с credentials (не коммитится, создайте вручную)
├── env.example          # Пример файла .env (скопируйте в .env)
└── GIGACHAT_README.md   # Эта инструкция
```

## Примеры

### Пример 1: Обработка файла

Создайте файл `messages.txt`:
```
Это длинный текст с множеством информации.
Здесь описываются различные концепции и идеи.
Важно понять основную суть всего этого текста.
```

Запустите:
```bash
python -m bot.main summary --file messages.txt
# или
python gigachat_cli.py summary --file messages.txt
```

Результат:
```
============================================================
ВЫЖИМКА ТЕКСТА:
============================================================
[Краткая выжимка от GigaChat]
============================================================
```

### Пример 2: Прямой ввод текста

```bash
python -m bot.main summary --text "Краткое описание вашей идеи или текста"
```

## Обработка ошибок

Приложение обрабатывает следующие типы ошибок:

- **Ошибки валидации**: Не указан текст или файл не найден
- **Ошибки аутентификации**: Неверные CLIENT_ID или CLIENT_SECRET
- **Ошибки API**: Проблемы при запросе к GigaChat API
- **Ошибки сети**: Проблемы с подключением к интернету

Все ошибки выводятся в понятном формате с рекомендациями по исправлению.

## Логирование

Приложение логирует ключевые операции:
- Получение токена доступа
- Генерация выжимки
- Ошибки API и сети

Логи выводятся в консоль с уровнем INFO.

## Примечания

- Файл `.env` не должен попадать в систему контроля версий (добавьте в `.gitignore`)
- Токен доступа получается автоматически при каждом запросе
- Максимальное время ожидания ответа от API: 30 секунд
- Поддерживается кодировка UTF-8 для файлов

## Дополнительная информация

- Документация GigaChat API: https://developers.sber.ru/gigachat
- Поддержка: проверьте документацию на официальном сайте

